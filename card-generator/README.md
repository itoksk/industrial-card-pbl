# 危険物カード画像生成ツール

乙4危険物取扱者試験の学習用カードゲーム画像を、AIを使って生成するWebアプリケーションです。

## 公開URL

- 本番サイト: https://otu4-5c8j.vercel.app/

## ソース情報

- リポジトリ: https://github.com/itoksk/industrial-card-pbl
- ディレクトリ: `card-generator/`

## 概要

Google Gemini APIを使用して、危険物に関するTCGカード画像を生成します。学生が危険物の性質、消火方法、法令などを楽しく学べるカードゲーム用のイラストを作成できます。全国展開を見据え、ユーザー自身がカードを作成・拡張できるツールとして設計されています。

## カード種別

| 種別 | 役割 | テーマカラー | 説明 |
|---|---|---|---|
| 危険物カード | 攻撃 | 分類ごとの色 | 第4類危険物の物質データに基づくカード |
| 消火カード | 防御 | 青 | 消火器具・設備に基づくカード |
| 運搬カード | 強化 | 緑 | 危険物の運搬方法に基づくカード |
| 法令カード | 妨害 | 金 | 消防法の法令に基づくカード |

## 機能

### 6つの入力モード

1. **テンプレート** - カテゴリ別のプリセットから選択（基本/分類別/性質/消火/運搬/法令）
2. **危険物（攻撃）** - 物質データからプロンプトを自動生成（8件のサンプルデータ搭載）
3. **消火（防御）** - 消火器具ベースの入力（種別選択 + 第4類使用可否）
4. **運搬（強化）** - 運搬方法に基づくカード作成
5. **法令（妨害）** - 消防法の法令に基づくカード作成
6. **直接入力** - プロンプトを自由に記述

### チュートリアル・ヘルプ

- 初回訪問時にDriver.jsによるインタラクティブツアーが自動スタート
- ヘッダーの「?」ボタンからいつでもツアーを再表示可能
- 7ステップで全機能をガイド

### カード裏面デザイン

- デフォルトの裏面デザイン搭載（`public/card-back.png`）
- カスタム画像をアップロードして差し替え可能（LocalStorageに保存）
- 生成したカードの表面/裏面をワンクリックで切り替え表示

### その他

- ダーク/ライトモード切り替え対応
- 生成した画像のPNGダウンロード
- 統一TCGカードデザイン（共通フレーム構造 + 種別カラーテーマ）

## 技術スタック

- **フレームワーク**: Next.js 15 (App Router)
- **言語**: TypeScript
- **スタイリング**: Tailwind CSS
- **チュートリアル**: Driver.js
- **AI API**: Google Gemini API
- **デプロイ**: Vercel

## セットアップ

### 必要条件

- Node.js 18.x 以上
- Google AI Studio APIキー

### インストール

```bash
npm install
npm run dev
```

ブラウザで http://localhost:3000 にアクセスし、Google Gemini APIキーを入力して使用。

### ビルド

```bash
npm run build
npm start
```

## 使い方

1. APIキーを入力
2. 6つのタブから入力方法を選択
3. 情報を入力またはサンプルデータを選択
4. 「プロンプト生成」をクリック（必要に応じて編集）
5. 「カード画像を生成」をクリック
6. 生成された画像をダウンロード

## プロジェクト構成

```
hazmat-image-generator/
├── src/
│   ├── app/
│   │   ├── api/generate/
│   │   │   └── route.ts          # 画像生成APIエンドポイント
│   │   ├── page.tsx              # メインUI
│   │   ├── layout.tsx            # レイアウト
│   │   └── globals.css           # グローバルスタイル
│   └── lib/
│       └── hazmat-data.ts        # カードデータ・プロンプト生成ロジック
├── public/
│   └── card-back.png             # カード裏面デフォルトデザイン
├── resource/
│   ├── 調査シート.xlsx            # 全72枚分のカードデータ
│   └── hazmat_card_back_design.png  # 裏面デザイン原本
├── doc/
│   └── progress.md               # 開発進捗記録
└── README.md
```

## データソース

`resource/調査シート.xlsx` に以下のデータが格納:
- 危険物カード: 31枚（第4類危険物の各物質）
- 消火カード: 21枚（消火器具・設備）
- 運搬カード: 10枚（運搬方法・規則）
- 法令カード: 10枚（消防法の法令）

## 注意事項

- APIキーは安全に管理してください
- 生成される画像はAIによるものであり、実際の危険物とは異なる場合があります
- 学習支援ツールとしてご利用ください
